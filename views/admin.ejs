<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>منزل للايجار</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    /* Optional styles for the suggestion list */
    .autocomplete-suggestions {
        margin-top: auto;
      position: absolute;
      background-color: #4e4949;
      border: 0.5px solid #3d3c3c;
      width: 150px;
      cursor: pointer;
    }

    
		h2 {
			text-align: center;
			margin-bottom: 20px;
		}
		label {
			display: block;
			font-weight: bold;
			margin-bottom: 5px;
		}
		input[type="email"], input[type="text"] {
			width: 100%;
			padding: 10px;
			margin-bottom: 20px;
			border: 1px solid #ccc;
			border-radius: 4px;
			box-sizing: border-box;
			font-size: 16px;
		}
		input[type="submit"] {
			background-color: #333;
			color: #fff;
			border: none;
			padding: 10px 20px;
			border-radius: 4px;
			cursor: pointer;
			font-size: 16px;
		}
		input[type="submit"]:hover {
			background-color: #666;
		}

		/* Media Queries for Responsive Design */

		@media screen and (max-width: 480px) {
			.container {
				max-width: 100%;
				padding: 10px;
			}
			input[type="submit"] {
				font-size: 14px;
			}
		}
		.add-btn {
			display: inline-block;
			background-color: #27ae60;
			color: #fff;
			border: none;
			padding: 8px 16px;
			border-radius: 4px;
			text-decoration: none;
		  }
		  
		  .add-btn:hover {
			background-color: #219d54;
		  }

          a:link, a:visited {
            
			
			cursor: pointer;
			font-size: 16px;
}

a:hover, a:active {
  background-color: rgb(221, 214, 214);
}
footer {
  position: relative; /* Make footer absolute positioned */
  bottom: 0; /* Position footer at the bottom */
  left: 0; /* Align footer to the left */
  width: 100%; /* Set footer width to 100% */
  height: 10vh; /* Set footer height (optional) */

}
html, body {
  direction: rtl;
 
  background: linear-gradient(to right, #ff9966, #ff5e62);
}

.header-bg {

background-image: url('https://images.unsplash.com/photo-1604651901125-8efdee8f2f7f?q=80&w=1571&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');

background-repeat: no-repeat;

background-size: cover;

height: 100px; /* or any other height */
border-radius: 0 0 50% 50% / 0 0 700% 700%;
}

.text-white  {

font-weight: bold;

padding: 0.5rem 1rem; /* or any other padding values */

}
.main-content {
direction: rtl;
			
            
            
            font-family: Arial, sans-serif;

           height: auto;
    }





    .slider-container {
  width: 100%;
  margin: 0 auto;
  overflow: hidden;
}

.slide-content {
  display: flex;
  flex-wrap: wrap;
}

.card {
  width: calc(33.33% - 20px); /* Adjust width for responsive layout */
  margin: 10px;
  background-color: #f1f1f1;
  border-radius: 5px;
  text-align: center;
  padding: 15px;
}

.card img {
  width: 100%;
  height: 150px;
  object-fit: cover; /* Maintain aspect ratio */
  margin-bottom: 10px;
}

.card h3 {
  font-size: 18px;
  margin-bottom: 5px;
}

.card p {
  font-size: 14px;
  margin-bottom: 10px;
}

.card a {
  text-decoration: none;
  color: #000;
  padding: 5px 10px;
  border: 1px solid #000;
  border-radius: 3px;
}

/* Responsive adjustments for smaller screens */
@media screen and (max-width: 768px) {
  .card {
    width: calc(50% - 20px);
  }
}

@media screen and (max-width: 480px) {
  .card {
    width: 100%;
  }
}



.sidenav {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: #111;
  overflow-x: hidden;
  transition: 0.5s;
  padding-top: 60px;
}

.sidenav a {
  padding: 8px 8px 8px 32px;
  text-decoration: none;
  font-size: 25px;
  color: #818181;
  display: block;
  transition: 0.3s;
}

.sidenav a:hover {
  color: #f1f1f1;
}

.sidenav .closebtn {
  position: absolute;
  top: 0;
  right: 25px;
  font-size: 36px;
  margin-left: 50px;
}

@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}


.text-with-border {

padding: 5px 10px;

border: 1px solid #ccc;

border-radius: 5px;

display: inline-block;

}

.zoom-on-hover {
  transition: transform .3s; /* Animation duration and easing function */
}

.zoom-on-hover:hover {
  transform: scale(1.5); /* Zoom factor */
}

  </style>
</head>
<body>
  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <% if (roll) { %>
      <% if (roll== 'admin') { %>

        <a href="/admin" class="text-white  text-decoration-none px-3">مديرالنظام</a>
        <% } %>
      <% } %>
    <a href="/" class="text-white  text-decoration-none px-3">الصفحة الرئيسية</a>
    <a href="#div_id" class="text-white  text-decoration-none px-3">من نحن</a>
    <a href="#div_id" class="text-white  text-decoration-none px-3">بيانات الاتصال</a>
    <% if (name) { %>
    <a href="/user" class="text-white  text-decoration-none px-3"><%= name %></a>  
    <a href="/logout" class="text-white  text-decoration-none px-3">تسجيل الخروج</a>
    <% } else{ %>  
        <a href="/signin" class="text-white  text-decoration-none px-3">تسجيل الدخول</a>
     <% } %>
  </div>
  <header class=" py-3  header-bg" >
    
    <div class="container d-flex justify-content-between align-items-center">
    
      <h2 class="text-white " style="font-size:3.5rem;">أدارة النظام</h2>
      <span class="text-white " style="font-size:3.5rem;cursor:pointer" onclick="openNav()">&#9776;</span>
    </div>
      
      





      
    </div>
  </header>

  <main class="container py-5 main-content">
    <% if (flashMessage) { %>
        <% for (let item of flashMessage) { %>
        <center id ="msg" style=" padding-bottom: 25px;" >  
            
                <button class="add-btn" onclick="deleteMsg()"> <%= item %> <i class="fa fa-check"></i></button>
              
     
        </center> 
        <% } %>   
  <% } %>

  <center>
    <div > 
<form action="/admin" method="POST" style=" padding-bottom: 25px;">
<dir class=" text-with-border">
<div class="container text-center">
    <div class="row">
        <div class="col">
<label for="name">الاسم:</label>
<input type="text" id="name" name="name" required></div>
<div class="col">
<label for="email">اسم المستخدم:</label>
<input type="email" id="email" name="email" required></div>
<div class="col">
<label for="password">كلمه السر:</label>
<input type="Text" id="password" name="password" required></div>
<div class="col">
<label for="role">الصلاحيه:</label>
<select id="role" name="role" required>
  <option value="">اختر الصلاحيه</option>
  <option value="admin">مدير نظام</option>
  <option value="user">مستخدم</option>
</select></div>
<div class="row">
<div class="col">
<button type="submit" class="add-btn"><i class="fa fa-plus"></i> انشاء مستخدم</button></div> </div>


</div></div></dir>
</form>
</div>
</center>

<section class="d-flex flex-column align-items-center mb-5">
    
    <table class="table table-dark table-striped">
        <thead>
            <tr>
              
              <th>الاسم</th>
              <th>اسم المستخدم</th>
              <th>كلمه السر</th>
              <th>الصلاحيه</th>
              
             
              <th>قرار</th>
            </tr>
          </thead>
          <tbody>
            <% for (let item of Data) { %>

          
            <tr >
              
              <td ><%=item.name%></td>
              <td><%=item.username%></td>
              <td><%=item.password%></td>
              <td><%=item.roll%></td>
              
             
              
              <td>
              
              <% if (item.id == 1 ) { %>
              <button  class="edit-btn" onclick="checkAction('edit','<%=item.id%>','<%=item.name%>','<%=item.username%>','<%=item.password%>','<%=item.roll%>')"><i class="fa fa-pencil"></i></button>
              <%} else{ %> 
              <button  class="delete-btn" onclick="checkAction('delete','<%=item.id%>','<%=item.name%>','<%=item.username%>','<%=item.password%>','<%=item.roll%>')"><i class="fa fa-trash"></i></button>
              <button  class="edit-btn" onclick="checkAction('edit','<%=item.id%>','<%=item.name%>','<%=item.username%>','<%=item.password%>','<%=item.roll%>')"><i class="fa fa-pencil"></i></button>
              
              <% } %> 
              </td>
            </tr>
            
            <% } %>   
          </tbody>
    
    
    </table>

</section>



      <div class="slider-container">
        <div class="slide-content">
          

            <% for (let item of addv) { %>
          <div class="card">
            <img class="zoom-on-hover" src='/download/<%= item['id'] %>' alt="Card Image 1">
            <h3><i class="fa fa-map-marker"></i> <%= item['Location'] %></h3>
            <p><%= item['Description'] %></p>
            <div>   <p class="text-with-border"><%= item['price'] %> جنيه</p>  <p class="text-with-border">  <%= item['size'] %> m&sup2;  </p> <p class="text-with-border"><%= item['room'] %> <i class="fa fa-bed"></i> </p><p class="text-with-border"><%= item['name'] %> <i class="fa fa-phone"></i> <%= item['phone'] %>  </p> </div>
            <a href ="/deleteAds/<%= item['id'] %>"  class="btn btn-danger">حذف</a>
        </div>


          <% } %>
         
  

      </div>

      



  </main>

  <footer class="bg-dark text-light text-center py-3" id ="div_id">
    <p>Copyright &copy;  موقع الايجار 2024  01234567890</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFOnpDln4hrXvNCqoO5EoUsJYwPEiDksV1LNUjTd8qhLcsVV9iK5pDDxlC" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>



function  checkAction (action,id,name,email,password,role){


Swal.fire({
        title: "Do you want to "+action+" that user ?",
        showDenyButton: false,
        showCancelButton: true,
        confirmButtonText: ""+action
        
        }).then((result) => {
        /* Read more about isConfirmed, isDenied below */
        if (result.isConfirmed) {
            if(action=='delete'){
            editeDeleteUser(action,id,name,email,password,role)
            }else{
                Edit(action,id,name,email,password,role);
            }
        } else if (result.isDenied) {
            Swal.fire("Changes are not saved", "", "info");
        }
        });

}

function editeDeleteUser(action,id,name,email,password,role) {
const data = JSON.stringify({
  'ActionType':action,
  'userId':id,
  'name':name,
  'email':email,
  'password':password,
  'role':role
})
const xhr = new XMLHttpRequest()
xhr.withCredentials = false;
xhr.addEventListener('readystatechange', function() {
  if (this.readyState === this.DONE) {
      console.log(xhr.responseText);
     location.reload();
  }
});
xhr.open('POST', '/editDeleteUser', true) ;
xhr.setRequestHeader('content-type', 'application/json;charset=UTF-8')
xhr.send(data);
}   



async   function Edit(action,id,name,email,password,role){

            const { value: formValues } = await Swal.fire({
    title: "Multiple inputs",
    html: `
        <input id="swal-input1" placeholder="123-45-678" class="swal2-input">
        
    `,
    focusConfirm: false,
    preConfirm: () => {
        return document.getElementById("swal-input1").value;
    }
    });
    if (formValues) {
        console.log(formValues);
        editeDeleteUser(action,id,name,email,formValues,role);
   
    }



}


function deleteMsg(){
document.getElementById('msg').remove();
}


function openNav() {
  document.getElementById("mySidenav").style.width = "250px";
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
}



var swiper = new Swiper(".slide-content", {
  slidesPerView: 3,
  spaceBetween: 20,
  loop: true,
  pagination: {
    el: '.swiper-pagination',
  }
});




  </script>

</body>
</html>
